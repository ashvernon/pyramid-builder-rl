# Global defaults for the pyramid sim + RL
sim:
  n_layers: 32
  t_max: 600
  workers_total: 120
  friction: 0.35
  heat: 0.2
  ramp_dismantle_rate: 0.02


  # Stock caps for normalization
  q_max: 5000
  transit_max: 1500
  site_max: 2500

  # Productivity
  alpha_q: 1.2
  alpha_h: 1.0
  alpha_p: 0.9

  # Ramp
  ramp_build_rate: 0.02
  ramp_type_base: [1.0, 0.95, 0.90, 0.85]  # none, straight, zigzag, spiral
  ramp_type_k:    [0.00, 0.25, 0.18, 0.12]
  ramp_integrity_decay: 0.003

  # Hierarchical phases
  foundation_base_gain: 0.012
  foundation_lock_warmup: 0.55
  foundation_lock_threshold: 0.9
  foundation_lock_horizon: 14
  layer_stabilize_rate: 0.05
  layer_lock_threshold: 0.95
  capstone_ramp_height: 12.0
  capstone_integrity: 0.8
  capstone_foundation: 0.9

rl:
  seed: 1
  gamma: 0.99
  batch_size: 256
  replay_size: 200000
  warmup_steps: 5000
  total_steps: 300000
  eval_every: 10000

  # HER
  her_k: 4

  # Goal diversity (small fraction of achieved-goal replay sampling)
  goal_replay_fraction: 0.15

  # Epsilon-greedy (discrete actions for MVP)
  eps_start: 1.0
  eps_end: 0.05
  eps_decay_steps: 150000

  # Network
  width: 256
  depth: 32
  lr: 0.0003

  # Target network updates
  target_update_every: 200
  target_tau: 1.0

  # Evaluation + capability probes
  capability_probe_tiers: [12, 16, 20]
  capability_probe_episodes: 3
  random_policy_ceiling: 11
  ramp_commit_height: 8.0
  ramp_commit_early_frac: 0.3
